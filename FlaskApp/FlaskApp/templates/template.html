<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Parallax Template - Materialize</title>

  <!-- CSS  -->
  <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/angular_material/1.1.0/angular-material.min.css">
  <link rel="stylesheet" href="{{ url_for('static', filename='node_modules/angular-material-event-calendar/dist/angular-material-event-calendar.css') }}">
</head>

<body ng-app="PA-App" ng-cloak>

  <!--Scripts-->
  <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js "></script>
  <script src="{{ url_for('static', filename='node_modules/angular/angular.js') }}"></script>
  <script src="{{ url_for('static', filename='node_modules/angular-aria/angular-aria.js') }}"></script>
  <script src="{{ url_for('static', filename='node_modules/angular-animate/angular-animate.js') }}"></script>
  <script src="{{ url_for('static', filename='node_modules/angular-messages/angular-messages.js') }}"></script>
  <script src="{{ url_for('static', filename='node_modules/angular-material/angular-material.js') }}"></script>
  <script src="{{ url_for('static', filename='node_modules/angular-material-event-calendar/dist/angular-material-event-calendar.js') }}"></script>

  <script type="text/javascript">
    var app = angular.module('PA-App', ['ngMaterial', 'ngMessages', 'material.components.eventCalendar'])
    app.config(['$interpolateProvider', function ($interpolateProvider) {
      $interpolateProvider.startSymbol('{|');
      $interpolateProvider.endSymbol('|}');
    }]);
    app.config(function ($mdThemingProvider, $mdColorPalette) {
      $mdThemingProvider.alwaysWatchTheme(true);
      angular.forEach(Object.keys($mdColorPalette), function (color) {
        var str = "-";
        if (!color.includes(str)) {
          $mdThemingProvider.theme(color).backgroundPalette(color);
        }
      });
    });
    app.controller('DemoCtrl', function ($scope, $mdColorPalette, $mdColorUtil, $mdColors) {
      $scope.getColor = function (color) {
        return $mdColorUtil.rgbaToHex($mdColors.getThemeColor(color))
      };
      $scope.user = {
        title: 'Developer',
        email: 'ipsum@lorem.com',
        colorChoice: 'purple',
        // colorHex: $scope.getColor(this.colorChoice + '-background-500'),
        tags: [],
        firstName: '',
        lastName: ''
      };
      $scope.colors = []
      for (color in $mdColorPalette) {
        var str = "-";
        if (!color.includes(str)) {
          $scope.colors.push(color);
        }
      }

      $scope.changeColor = function (color) {
        $scope.user.colorChoice = color;
      };

    });
    app.controller('AppCtrl', function ($scope, $mdDialog) {
      $scope.status = ' ';
      $scope.customFullscreen = false;

      $scope.showInput = function (ev) {
        $mdDialog.show({
          contentElement: '#myDialog',
          parent: angular.element(document.body),
          targetEvent: ev,
          clickOutsideToClose: true
        });
      };
    })
  </script>

  <div ng-controller="DemoCtrl" layout="column" ng-cloak class="md-inline-form" md-theme="{|user.colorChoice|}" md-theme-watch>

    <md-content md-colors="{background: 'background-hue-3'}" layout-gt-sm="row" layout-padding>
      <div>
        <md-input-container>
          <label>Title</label>
          <input ng-model="user.title">
        </md-input-container>
      </div>
    </md-content>

    <md-content layout-padding>
      <div>
        <form name="userForm">

          <div layout-gt-xs="row">
            <md-input-container class="md-block" flex-gt-xs>
              <label>Tags</label>
              <md-chips ng-model="user.tags">
              </md-chips>
            </md-input-container>

            <md-input-container>
              <md-select ng-model="user.colorChoice">
                <md-option ng-repeat="color in colors" ng-value="color" md-colors="{background: '{|color|}' + '-background-500'}">
                  {|color|} {|getColor(color + '-background-500')|}
                </md-option>
              </md-select>
            </md-input-container>
          </div>

          <div layout-gt-xs="row">
            <md-input-container class="md-block">
              <label>Begin Date</label>
              <md-datepicker ng-model="user.beginDate"></md-datepicker>
            </md-input-container>

            <md-input-container>
              <label>Begin Time</label>
              <md-datepicker ng-model="user.beginTime"></md-datepicker>
            </md-input-container>
            <md-input-container>
              <label>End Date</label>
              <md-datepicker ng-model="user.endDate"></md-datepicker>
            </md-input-container>

            <md-input-container>
              <label>End Time</label>
              <md-datepicker ng-model="user.endTime"></md-datepicker>
            </md-input-container>

            <md-input-container class="md-block">
              <label>Location</label>
              <input ng-model="user.location">
            </md-input-container>
          </div>


          <md-input-container class="md-block">
            <label>Description</label>
            <textarea ng-model="user.description" md-maxlength="200" md-select-on-focus></textarea>
          </md-input-container>

          <md-content flex layout-padding ng-model='user.colorHex'>
            {| user.colorHex |}
          </md-content>
        </form>
      </div>
    </md-content>
  </div>
  {% block body %} {% endblock %}
</body>

</html>